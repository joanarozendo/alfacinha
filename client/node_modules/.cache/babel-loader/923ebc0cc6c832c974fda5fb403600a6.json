{"ast":null,"code":"import _regeneratorRuntime from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component,Fragment}from\"react\";import Image from\"react-bootstrap/Image\";import{edit as editUserService}from\"./../../services/user\";// import { remove as removeUserService } from \"./../../services/user\";\nvar UserEditProfileView=/*#__PURE__*/function(_Component){_inherits(UserEditProfileView,_Component);function UserEditProfileView(props){var _this;_classCallCheck(this,UserEditProfileView);_this=_possibleConstructorReturn(this,_getPrototypeOf(UserEditProfileView).call(this,props));_this.state={user:_this.props.user};_this.handleInputChange=_this.handleInputChange.bind(_assertThisInitialized(_this));_this.handleFileChange=_this.handleFileChange.bind(_assertThisInitialized(_this));_this.handleFormSubmission=_this.handleFormSubmission.bind(_assertThisInitialized(_this));// this.onDeleteTrigger = this.onDeleteTrigger.bind(this);\nreturn _this;}/* async componentDidMount() {\n    console.log(this.props);\n    try {\n      const user = await loadUserService();\n      this.setState({\n        user\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  } */_createClass(UserEditProfileView,[{key:\"handleInputChange\",value:function handleInputChange(event){var name=event.target.name;var value=event.target.value;this.setState({user:_objectSpread({},this.state.user,_defineProperty({},name,value))});}},{key:\"handleFileChange\",value:function handleFileChange(event){console.dir(event.target.files);console.log(\"WHAT UUUUUP\",event.target.files);var file=event.target.files[0];this.setState({image:file});}},{key:\"handleFormSubmission\",value:function handleFormSubmission(event){var user,image,id;return _regeneratorRuntime.async(function handleFormSubmission$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();user=this.state.user;image=this.state.image;id=this.state.user._id;console.log(\"ID HERE\",id);_context.prev=5;_context.next=8;return _regeneratorRuntime.awrap(editUserService(id,user,image));case 8:_context.next=10;return _regeneratorRuntime.awrap(this.props.loadUser());case 10:this.props.history.push(\"/user-profile\");_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](5);console.log(_context.t0);case 16:case\"end\":return _context.stop();}}},null,this,[[5,13]]);}/*   async onDeleteTrigger() {\n    const id = this.state.user._id;\n    // const id = this.props.match.params.id;\n    try {\n      await removeUserService(id);\n      // await this.props.loadUser();\n      this.props.history.push(`/`);\n    } catch (error) {\n      console.log(error);\n    }\n  } */},{key:\"render\",value:function render(){console.log(\"i am in the edit view\",this.state.user);console.log(\"user image\",this.state.user.image);var user=this.state.user;return React.createElement(\"main\",{className:\"MinPageHeight m-5 p-5\"},user&&React.createElement(Fragment,null,React.createElement(Image,{fluid:true,src:user.image,className:\"UserProfileEditImg mb-3\"}),React.createElement(\"form\",{onSubmit:this.handleFormSubmission,className:\"form-signin w-50\"},React.createElement(\"label\",{htmlFor:\"image\",className:\"sr-only\"},\"Image\"),React.createElement(\"input\",{type:\"file\",placeholder:\"image\",className:\"form-control mb-3\",name:\"image\",onChange:this.handleFileChange// required\n}),React.createElement(\"label\",{htmlFor:\"name\",className:\"sr-only\"},\"Name\"),React.createElement(\"input\",{type:\"text\",placeholder:\"Name\",value:user.name||\"\",className:\"form-control mb-3\",name:\"name\",onChange:this.handleInputChange,required:true}),React.createElement(\"label\",{htmlFor:\"email\",className:\"sr-only\"},\"Email\"),React.createElement(\"input\",{type:\"email\",placeholder:\"Email\",value:user.email||\"\",className:\"form-control mb-3\",name:\"email\",onChange:this.handleInputChange,required:true}),React.createElement(\"label\",{htmlFor:\"aboutMe\",className:\"sr-only\"},\"About Me\"),React.createElement(\"textarea\",{type:\"text\",placeholder:\"About Me\",value:user.aboutMe||\"\",className:\"form-control mb-3\",name:\"aboutMe\",onChange:this.handleInputChange,required:true}),React.createElement(\"button\",{className:\"btn MyBtn w-50 mb-2\"},\"Edit user\"),React.createElement(\"br\",null)),React.createElement(\"button\",{className:\"btn MyBtn w-50 mb-2\",onClick:this.onDeleteTrigger},\"Delete user\")));}}]);return UserEditProfileView;}(Component);export default UserEditProfileView;","map":{"version":3,"sources":["/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/src/views/User/UserEditProfileView.jsx"],"names":["React","Component","Fragment","Image","edit","editUserService","UserEditProfileView","props","state","user","handleInputChange","bind","handleFileChange","handleFormSubmission","event","name","target","value","setState","console","dir","files","log","file","image","preventDefault","id","_id","loadUser","history","push","email","aboutMe","onDeleteTrigger"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\n\nimport Image from \"react-bootstrap/Image\";\n\nimport { edit as editUserService } from \"./../../services/user\";\n// import { remove as removeUserService } from \"./../../services/user\";\n\nclass UserEditProfileView extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: this.props.user\n    };\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleFileChange = this.handleFileChange.bind(this);\n    this.handleFormSubmission = this.handleFormSubmission.bind(this);\n    // this.onDeleteTrigger = this.onDeleteTrigger.bind(this);\n  }\n\n  /* async componentDidMount() {\n    console.log(this.props);\n    try {\n      const user = await loadUserService();\n      this.setState({\n        user\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  } */\n\n  handleInputChange(event) {\n    const name = event.target.name;\n    const value = event.target.value;\n    this.setState({\n      user: {\n        ...this.state.user,\n        [name]: value\n      }\n    });\n  }\n\n  handleFileChange(event) {\n    console.dir(event.target.files);\n    console.log(\"WHAT UUUUUP\", event.target.files);\n    const file = event.target.files[0];\n    this.setState({\n      image: file\n    });\n  }\n\n  async handleFormSubmission(event) {\n    event.preventDefault();\n    const user = this.state.user;\n    const image = this.state.image;\n    const id = this.state.user._id;\n    console.log(\"ID HERE\", id);\n    try {\n      await editUserService(id, user, image);\n      await this.props.loadUser();\n      this.props.history.push(`/user-profile`);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n/*   async onDeleteTrigger() {\n    const id = this.state.user._id;\n    // const id = this.props.match.params.id;\n    try {\n      await removeUserService(id);\n      // await this.props.loadUser();\n      this.props.history.push(`/`);\n    } catch (error) {\n      console.log(error);\n    }\n  } */\n\n  render() {\n    console.log(\"i am in the edit view\", this.state.user);\n    console.log(\"user image\", this.state.user.image);\n    const user = this.state.user;\n    return (\n      <main className=\"MinPageHeight m-5 p-5\">\n        {user && (\n          <Fragment>\n            <Image fluid src={user.image} className=\"UserProfileEditImg mb-3\" />\n            <form\n              onSubmit={this.handleFormSubmission}\n              className=\"form-signin w-50\"\n            >\n              <label htmlFor=\"image\" className=\"sr-only\">\n                Image\n              </label>\n              <input\n                type=\"file\"\n                placeholder=\"image\"\n                className=\"form-control mb-3\"\n                name=\"image\"\n                onChange={this.handleFileChange}\n                // required\n              />\n              <label htmlFor=\"name\" className=\"sr-only\">\n                Name\n              </label>\n              <input\n                type=\"text\"\n                placeholder=\"Name\"\n                value={user.name || \"\"}\n                className=\"form-control mb-3\"\n                name=\"name\"\n                onChange={this.handleInputChange}\n                required\n              />\n              <label htmlFor=\"email\" className=\"sr-only\">\n                Email\n              </label>\n              <input\n                type=\"email\"\n                placeholder=\"Email\"\n                value={user.email || \"\"}\n                className=\"form-control mb-3\"\n                name=\"email\"\n                onChange={this.handleInputChange}\n                required\n              />\n              <label htmlFor=\"aboutMe\" className=\"sr-only\">\n                About Me\n              </label>\n              <textarea\n                type=\"text\"\n                placeholder=\"About Me\"\n                value={user.aboutMe || \"\"}\n                className=\"form-control mb-3\"\n                name=\"aboutMe\"\n                onChange={this.handleInputChange}\n                required\n              ></textarea>\n              <button className=\"btn MyBtn w-50 mb-2\">Edit user</button>\n              <br />\n            </form>\n              <button\n                className=\"btn MyBtn w-50 mb-2\"\n                onClick={this.onDeleteTrigger}\n              >\n                Delete user\n              </button>\n          </Fragment>\n        )}\n      </main>\n    );\n  }\n}\n\nexport default UserEditProfileView;\n"]},"metadata":{},"sourceType":"module"}