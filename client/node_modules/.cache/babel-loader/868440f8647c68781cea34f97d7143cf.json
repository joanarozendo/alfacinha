{"ast":null,"code":"import _objectSpread from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/regenerator\";import _classCallCheck from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{listRestaurants}from\"../../services/restaurantZomato\";import SearchInput from\"../../components/SearchInput\";import{Link}from\"react-router-dom\";import ReactLoading from\"react-loading\";import\"./style.css\";import Button from\"react-bootstrap/Button\";var RestaurantListView=/*#__PURE__*/function(_Component){_inherits(RestaurantListView,_Component);function RestaurantListView(props){var _this;_classCallCheck(this,RestaurantListView);_this=_possibleConstructorReturn(this,_getPrototypeOf(RestaurantListView).call(this,props));_this.state={loadingState:false,restaurants:null,limit:15,nameQuery:\"\",locationQuery:\"\",averageQuery:\"\"};_this.onLoadMore=_this.onLoadMore.bind(_assertThisInitialized(_this));_this.handleOnInputChange=_this.handleOnInputChange.bind(_assertThisInitialized(_this));_this.renderRestaurants=_this.renderRestaurants.bind(_assertThisInitialized(_this));_this.filterBySearch=_this.filterBySearch.bind(_assertThisInitialized(_this));return _this;}_createClass(RestaurantListView,[{key:\"componentDidMount\",value:function componentDidMount(){var vegetarianRestaurants;return _regeneratorRuntime.async(function componentDidMount$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(listRestaurants());case 2:vegetarianRestaurants=_context.sent;this.setState({restaurants:vegetarianRestaurants});case 4:case\"end\":return _context.stop();}}},null,this);}},{key:\"handleOnInputChange\",value:function handleOnInputChange(event){var name=event.target.name;var value=event.target.value;this.setState(_defineProperty({},name,value));}},{key:\"filterBySearch\",value:function filterBySearch(restaurant){console.log(restaurant);if(restaurant.restaurant.name&&this.state.nameQuery){return restaurant.restaurant.name.toLowerCase().includes(this.state.nameQuery);}if(restaurant.restaurant.location.address&&this.state.locationQuery){return restaurant.restaurant.location.address.toLowerCase().includes(this.state.locationQuery);}if(restaurant.restaurant.average_cost_for_two)return(restaurant.restaurant.average_cost_for_two/2).toString().toLowerCase().includes(this.state.averageQuery);}},{key:\"onLoadMore\",value:function onLoadMore(){// console.log(\"load more\");\nthis.setState(_objectSpread({},this.state,{limit:this.state.limit+10}));}},{key:\"renderRestaurants\",value:function renderRestaurants(){var _this2=this;return this.state.restaurants.filter(function(filteredRestaurantBySearch){return _this2.filterBySearch(filteredRestaurantBySearch);}).slice(0,this.state.limit).map(function(restaurant){return React.createElement(\"div\",{key:restaurant.restaurant.id,className:\"card ml-3 mb-5 mr-5\",style:{maxWidth:\"540px\"}},React.createElement(\"div\",{className:\"row no-gutters\"},React.createElement(\"div\",{className:\"col-md-4\"},React.createElement(\"img\",{src:restaurant.restaurant.featured_image,className:\"card-img\",alt:\"Restaurant\"})),React.createElement(\"div\",{className:\"col-md-8\"},React.createElement(\"div\",{className:\"card-body\"},React.createElement(Link,{to:\"/restaurant/\".concat(restaurant.restaurant.id)},React.createElement(\"h5\",{className:\"card-title\"},restaurant.restaurant.name)),React.createElement(\"p\",{className:\"card-text\"},\"Cousine: \",restaurant.restaurant.cuisines),React.createElement(\"p\",{className:\"card-text\"},\"Location: \",restaurant.restaurant.location.address),React.createElement(\"p\",{className:\"card-text\"},\"Average Cost:\",\" \",restaurant.restaurant.average_cost_for_two/2,restaurant.restaurant.currency),React.createElement(\"p\",{className:\"card-text\"},React.createElement(\"small\",{className:\"text-muted\"},\"Contact: \",restaurant.restaurant.phone_numbers))))));});}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"MinPageHeight m-2 p-2\"},React.createElement(SearchInput,Object.assign({},this.state,{onChange:this.handleOnInputChange})),!this.state.restaurants&&React.createElement(ReactLoading,{type:\"bars\",color:\"white\"}),this.state.restaurants&&React.createElement(\"div\",null,React.createElement(\"div\",{className:\"d-flex flex-wrap ml-5 mt-5\"},this.renderRestaurants()),React.createElement(Button,{className:\"MyBtn LogoutBtn mx-2\",onClick:this.onLoadMore},\"Load\")));}}]);return RestaurantListView;}(Component);export default RestaurantListView;","map":{"version":3,"sources":["/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/src/views/Restaurants/RestaurantListView.jsx"],"names":["React","Component","listRestaurants","SearchInput","Link","ReactLoading","Button","RestaurantListView","props","state","loadingState","restaurants","limit","nameQuery","locationQuery","averageQuery","onLoadMore","bind","handleOnInputChange","renderRestaurants","filterBySearch","vegetarianRestaurants","setState","event","name","target","value","restaurant","console","log","toLowerCase","includes","location","address","average_cost_for_two","toString","filter","filteredRestaurantBySearch","slice","map","id","maxWidth","featured_image","cuisines","currency","phone_numbers"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { listRestaurants } from \"../../services/restaurantZomato\";\nimport SearchInput from \"../../components/SearchInput\";\nimport { Link } from \"react-router-dom\";\nimport ReactLoading from \"react-loading\";\n\nimport \"./style.css\";\nimport Button from \"react-bootstrap/Button\";\n\nclass RestaurantListView extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loadingState: false,\n      restaurants: null,\n      limit: 15,\n      nameQuery: \"\",\n      locationQuery: \"\",\n      averageQuery: \"\"\n    };\n    this.onLoadMore = this.onLoadMore.bind(this);\n    this.handleOnInputChange = this.handleOnInputChange.bind(this);\n    this.renderRestaurants = this.renderRestaurants.bind(this);\n    this.filterBySearch = this.filterBySearch.bind(this);\n  }\n\n  async componentDidMount() {\n    const vegetarianRestaurants = await listRestaurants();\n    this.setState({\n      restaurants: vegetarianRestaurants\n    });\n  }\n\n  handleOnInputChange(event) {\n    const name = event.target.name;\n    const value = event.target.value;\n    this.setState({\n      [name]: value\n    });\n  }\n  filterBySearch(restaurant) {\n    console.log(restaurant);\n    if (restaurant.restaurant.name && this.state.nameQuery) {\n      return restaurant.restaurant.name\n        .toLowerCase()\n        .includes(this.state.nameQuery);\n    }\n    if (restaurant.restaurant.location.address && this.state.locationQuery) {\n      return restaurant.restaurant.location.address\n        .toLowerCase()\n        .includes(this.state.locationQuery);\n    }\n    if (restaurant.restaurant.average_cost_for_two)\n      return (restaurant.restaurant.average_cost_for_two / 2)\n        .toString()\n        .toLowerCase()\n        .includes(this.state.averageQuery);\n  }\n  onLoadMore() {\n    // console.log(\"load more\");\n    this.setState({\n      ...this.state,\n      limit: this.state.limit + 10\n    });\n  }\n\n  renderRestaurants() {\n    return this.state.restaurants\n      .filter(filteredRestaurantBySearch =>\n        this.filterBySearch(filteredRestaurantBySearch)\n      )\n      .slice(0, this.state.limit)\n      .map(restaurant => {\n        return (\n          <div\n            key={restaurant.restaurant.id}\n            className=\"card ml-3 mb-5 mr-5\"\n            style={{ maxWidth: \"540px\" }}\n          >\n            <div className=\"row no-gutters\">\n              <div className=\"col-md-4\">\n                <img\n                  src={restaurant.restaurant.featured_image}\n                  className=\"card-img\"\n                  alt=\"Restaurant\"\n                />\n              </div>\n              <div className=\"col-md-8\">\n                <div className=\"card-body\">\n                  <Link to={`/restaurant/${restaurant.restaurant.id}`}>\n                    <h5 className=\"card-title\">{restaurant.restaurant.name}</h5>\n                  </Link>\n                  <p className=\"card-text\">\n                    Cousine: {restaurant.restaurant.cuisines}\n                  </p>\n                  <p className=\"card-text\">\n                    Location: {restaurant.restaurant.location.address}\n                  </p>\n                  <p className=\"card-text\">\n                    Average Cost:{\" \"}\n                    {restaurant.restaurant.average_cost_for_two / 2}\n                    {restaurant.restaurant.currency}\n                  </p>\n                  <p className=\"card-text\">\n                    <small className=\"text-muted\">\n                      Contact: {restaurant.restaurant.phone_numbers}\n                    </small>\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n      });\n  }\n\n  render() {\n    return (\n      <div className=\"MinPageHeight m-2 p-2\">\n        {/* <SearchInput {...this.state} onChange={this.handleOnInputChange} /> */}\n        <SearchInput {...this.state} onChange={this.handleOnInputChange} />\n        {!this.state.restaurants && (\n          <ReactLoading type={\"bars\"} color={\"white\"} />\n        )}\n        {this.state.restaurants && (\n          <div>\n            <div className=\"d-flex flex-wrap ml-5 mt-5\">\n              {this.renderRestaurants()}\n            </div>\n            <Button className=\"MyBtn LogoutBtn mx-2\" onClick={this.onLoadMore}>\n              Load\n            </Button>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default RestaurantListView;\n"]},"metadata":{},"sourceType":"module"}