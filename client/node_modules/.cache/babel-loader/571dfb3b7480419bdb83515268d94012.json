{"ast":null,"code":"var _jsxFileName = \"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/src/views/Restaurants/SingleRestaurantView.jsx\";\nimport React, { Component } from \"react\";\nimport { loadRestaurant as restaurantApi } from \"../../services/restaurantZomato\";\nimport CommentList from \"./../Comments/CommentList\";\nimport Button from \"react-bootstrap/Button\";\nimport MapBox from \"./../../components/MapBox\";\nimport { loadUserInformation as loadUserInformationService } from './../../services/authentication';\nimport { addToFavorites as addToFavoritesService } from './../../services/authentication';\nimport './style.css';\n\nclass singleRestaurant extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      restaurant: null,\n      user: null,\n      favorites: null\n    };\n    this.addToFavoritesButton = this.addToFavoritesButton.bind(this);\n  }\n\n  async componentDidMount() {\n    const id = this.props.match.params.id; // console.log(\"singleRest\", id);\n\n    try {\n      const user = await loadUserInformationService();\n      const singleRestaurant = await restaurantApi(id); //console.log('response from api', singleRestaurant);\n\n      this.setState({\n        restaurant: singleRestaurant,\n        user: user\n      });\n    } catch (error) {\n      console.log(error);\n      this.props.history.push('/error/404');\n    }\n  }\n\n  async addToFavoritesButton(event, name) {\n    event.preventDefault();\n    const favoriteRestaurantId = this.props.match.params.id;\n    console.log('addToFavoritesButton STATE', favoriteRestaurantId, name);\n\n    try {\n      await addToFavoritesService(favoriteRestaurantId, name); // console.log(\"USER JOINVIEW\", user);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  render() {\n    const restaurant = this.state.restaurant;\n    const user = this.state.user; // const id = this.props.match.params.id;\n    //console.log('hello', restaurant);\n\n    return React.createElement(\"div\", {\n      className: \"MinPageHeight mt-4 pt-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, restaurant && React.createElement(\"div\", {\n      className: \"SingleRestaurantCard card m-5 p-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row no-gutters\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: restaurant.featured_image,\n      className: \"card-img\",\n      alt: \"...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }), React.createElement(MapBox, {\n      lat: restaurant.location.latitude,\n      lng: restaurant.location.longitude,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-md-8\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      className: \"card-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, restaurant.name), React.createElement(\"p\", {\n      className: \"card-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"Cuisines: \", restaurant.cuisines), React.createElement(\"p\", {\n      className: \"card-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"Type: \", restaurant.establishment), React.createElement(\"p\", {\n      className: \"card-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Average cost: \", restaurant.average_cost_for_two / 2, restaurant.currency), React.createElement(\"p\", {\n      className: \"card-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"Neighborhood: \", restaurant.location.locality_verbose), React.createElement(\"p\", {\n      className: \"card-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"Address: \", restaurant.location.address), React.createElement(\"p\", {\n      className: \"card-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"Contact: \", restaurant.phone_numbers), React.createElement(\"p\", {\n      className: \"card-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"Zomato Rating\", \":\", ' ', restaurant.user_rating.aggregate_rating, \" (\", restaurant.user_rating.rating_text, \")\"), user && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: event => {\n        this.addToFavoritesButton(event, restaurant.name);\n      },\n      className: \"btn MyBtn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"Add to Favorites\")))))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), React.createElement(CommentList, Object.assign({}, this.props, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default singleRestaurant;","map":{"version":3,"sources":["/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/src/views/Restaurants/SingleRestaurantView.jsx"],"names":["React","Component","loadRestaurant","restaurantApi","CommentList","Button","MapBox","loadUserInformation","loadUserInformationService","addToFavorites","addToFavoritesService","singleRestaurant","constructor","props","state","restaurant","user","favorites","addToFavoritesButton","bind","componentDidMount","id","match","params","setState","error","console","log","history","push","event","name","preventDefault","favoriteRestaurantId","render","featured_image","location","latitude","longitude","cuisines","establishment","average_cost_for_two","currency","locality_verbose","address","phone_numbers","user_rating","aggregate_rating","rating_text"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { loadRestaurant as restaurantApi } from \"../../services/restaurantZomato\";\nimport CommentList from \"./../Comments/CommentList\";\nimport Button from \"react-bootstrap/Button\";\nimport MapBox from \"./../../components/MapBox\";\n\nimport { loadUserInformation as loadUserInformationService } from './../../services/authentication';\nimport { addToFavorites as addToFavoritesService } from './../../services/authentication';\n\nimport './style.css';\n\nclass singleRestaurant extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      restaurant: null,\n      user: null,\n      favorites: null\n    };\n    this.addToFavoritesButton = this.addToFavoritesButton.bind(this);\n  }\n\n  async componentDidMount() {\n    const id = this.props.match.params.id;\n    // console.log(\"singleRest\", id);\n    try {\n      const user = await loadUserInformationService();\n      const singleRestaurant = await restaurantApi(id);\n      //console.log('response from api', singleRestaurant);\n      this.setState({\n        restaurant: singleRestaurant,\n        user: user\n      });\n    } catch (error) {\n      console.log(error);\n      this.props.history.push('/error/404');\n    }\n  }\n\n  async addToFavoritesButton(event, name) {\n    event.preventDefault();\n    const favoriteRestaurantId = this.props.match.params.id;\n\n    console.log('addToFavoritesButton STATE', favoriteRestaurantId, name);\n    try {\n      await addToFavoritesService(favoriteRestaurantId, name);\n      // console.log(\"USER JOINVIEW\", user);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  render() {\n    const restaurant = this.state.restaurant;\n    const user = this.state.user;\n    // const id = this.props.match.params.id;\n    //console.log('hello', restaurant);\n    return (\n      <div className=\"MinPageHeight mt-4 pt-4\">\n        {restaurant && (\n          <div className=\"SingleRestaurantCard card m-5 p-5\">\n            <div className=\"row no-gutters\">\n              <div className=\"col-md-4\">\n                <img\n                  src={restaurant.featured_image}\n                  className=\"card-img\"\n                  alt=\"...\"\n                />\n                <MapBox\n                  lat={restaurant.location.latitude}\n                  lng={restaurant.location.longitude}\n                />\n              </div>\n              <div className=\"col-md-8\">\n                <div className=\"card-body\">\n                  <h5 className=\"card-title\">{restaurant.name}</h5>\n                  <p className=\"card-text\">Cuisines: {restaurant.cuisines}</p>\n                  <p className=\"card-text\">Type: {restaurant.establishment}</p>\n                  <p className=\"card-text\">\n                    Average cost: {restaurant.average_cost_for_two / 2}\n                    {restaurant.currency}\n                  </p>\n                  <p className=\"card-text\">\n                    Neighborhood: {restaurant.location.locality_verbose}\n                  </p>\n                  <p className=\"card-text\">\n                    Address: {restaurant.location.address}\n                  </p>\n                  <p className=\"card-text\">\n                    Contact: {restaurant.phone_numbers}\n                  </p>\n                  <p className=\"card-text\">\n                    Zomato Rating{/*  (1-5) */}:{' '}\n                    {restaurant.user_rating.aggregate_rating} (\n                    {restaurant.user_rating.rating_text})\n                  </p>\n                  {/* <p className=\"card-text\">\n                    Number of votes: {restaurant.user_rating.votes}\n                  </p> */}\n                  {/* <p className=\"card-text\">On Zomato: {restaurant.url}</p> */}\n                  {user && (\n                    <div>\n                      <Button\n                        onClick={event => {\n                          this.addToFavoritesButton(event, restaurant.name);\n                        }}\n                        className=\"btn MyBtn\"\n                      >\n                        Add to Favorites\n                      </Button>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n        <div>\n          <br />\n          <CommentList {...this.props} />\n          {/* <CommentCreateView {...this.props} /> */}\n          {/* <div\n            className=\"fb-comments\"\n            data-href=\"https://www.facebook.com/Alfacinha-100341914808752\"\n            data-width=\"\"\n            data-numposts=\"10\"\n          ></div> */}\n          <br />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default singleRestaurant;\n"]},"metadata":{},"sourceType":"module"}