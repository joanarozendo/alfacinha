{"ast":null,"code":"import _regeneratorRuntime from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{create as createCommentService}from'./../../services/comments';var CommentEditView=/*#__PURE__*/function(_Component){_inherits(CommentEditView,_Component);function CommentEditView(props){var _this;_classCallCheck(this,CommentEditView);_this=_possibleConstructorReturn(this,_getPrototypeOf(CommentEditView).call(this,props));_this.state={image:null,text:'',restaurant:''};_this.handleInputChange=_this.handleInputChange.bind(_assertThisInitialized(_this));_this.handleFormSubmission=_this.handleFormSubmission.bind(_assertThisInitialized(_this));_this.handleFileChange=_this.handleFileChange.bind(_assertThisInitialized(_this));return _this;}_createClass(CommentEditView,[{key:\"handleInputChange\",value:function handleInputChange(event){var _objectSpread2;var resId=this.props.match.params.id;var name=event.target.name;var value=event.target.value;this.setState(_objectSpread({},this.state,(_objectSpread2={},_defineProperty(_objectSpread2,name,value),_defineProperty(_objectSpread2,\"restaurant\",resId),_objectSpread2)));}},{key:\"handleFormSubmission\",value:function handleFormSubmission(event){var _this$state,text,image,resId;return _regeneratorRuntime.async(function handleFormSubmission$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_this$state=this.state,text=_this$state.text,image=_this$state.image;resId=this.props.match.params.id;_context.prev=3;_context.next=6;return _regeneratorRuntime.awrap(createCommentService({text:text,image:image,restaurant:resId}));case 6:this.props.onSubmit();// this.props.history.push(`/restaurant/${resId}`);\n_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](3);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},null,this,[[3,9]]);}},{key:\"handleFileChange\",value:function handleFileChange(event){var file=event.target.files[0];this.setState(_objectSpread({},this.state,{image:file}));}},{key:\"render\",value:function render(){var text=this.state.text;return React.createElement(\"main\",{className:\"pl-4 ml-4\"},React.createElement(\"form\",{onSubmit:this.handleFormSubmission,className:\"form-signin w-75\"},React.createElement(\"label\",{htmlFor:\"text\",id:\"txt\",className:\"sr-only\"},\"Comment\"),React.createElement(\"textarea\",{placeholder:\"Write your comment here\",value:text||'',name:\"text\",className:\"form-control mb-3\",onChange:this.handleInputChange}),React.createElement(\"label\",{htmlFor:\"image\",id:\"image\",className:\"sr-only\"},\"Image\"),React.createElement(\"input\",{type:\"file\",name:\"image\",className:\"form-control mb-3\",onChange:this.handleFileChange}),React.createElement(\"button\",{className:\"btn btn-lg MyBtn btn-block mb-5\"},\"Comment\")));}}]);return CommentEditView;}(Component);export default CommentEditView;","map":{"version":3,"sources":["/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/src/views/Comments/CommentCreateView.jsx"],"names":["React","Component","create","createCommentService","CommentEditView","props","state","image","text","restaurant","handleInputChange","bind","handleFormSubmission","handleFileChange","event","resId","match","params","id","name","target","value","setState","preventDefault","onSubmit","console","log","file","files"],"mappings":"q2CAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,MAAM,GAAIC,CAAAA,oBAAnB,KAA+C,2BAA/C,C,GAEMC,CAAAA,e,yEACJ,yBAAYC,KAAZ,CAAmB,iDACjB,iFAAMA,KAAN,GACA,MAAKC,KAAL,CAAa,CACXC,KAAK,CAAE,IADI,CAEXC,IAAI,CAAE,EAFK,CAGXC,UAAU,CAAE,EAHD,CAAb,CAKA,MAAKC,iBAAL,CAAyB,MAAKA,iBAAL,CAAuBC,IAAvB,+BAAzB,CACA,MAAKC,oBAAL,CAA4B,MAAKA,oBAAL,CAA0BD,IAA1B,+BAA5B,CACA,MAAKE,gBAAL,CAAwB,MAAKA,gBAAL,CAAsBF,IAAtB,+BAAxB,CATiB,aAUlB,C,wFAEiBG,K,CAAO,oBACvB,GAAMC,CAAAA,KAAK,CAAG,KAAKV,KAAL,CAAWW,KAAX,CAAiBC,MAAjB,CAAwBC,EAAtC,CACA,GAAMC,CAAAA,IAAI,CAAGL,KAAK,CAACM,MAAN,CAAaD,IAA1B,CACA,GAAME,CAAAA,KAAK,CAAGP,KAAK,CAACM,MAAN,CAAaC,KAA3B,CACA,KAAKC,QAAL,kBACK,KAAKhB,KADV,mDAEGa,IAFH,CAEUE,KAFV,8CAGcN,KAHd,oBAKD,C,kEAE0BD,K,iKACzBA,KAAK,CAACS,cAAN,G,YACwB,KAAKjB,K,CAArBE,I,aAAAA,I,CAAMD,K,aAAAA,K,CACRQ,K,CAAQ,KAAKV,KAAL,CAAWW,KAAX,CAAiBC,MAAjB,CAAwBC,E,kEAGAf,oBAAoB,CAAC,CACvDK,IAAI,CAAJA,IADuD,CAEvDD,KAAK,CAALA,KAFuD,CAGvDE,UAAU,CAAEM,KAH2C,CAAD,C,SAMxD,KAAKV,KAAL,CAAWmB,QAAX,GACA;+EAEAC,OAAO,CAACC,GAAR,c,2HAIaZ,K,CAAO,CACtB,GAAMa,CAAAA,IAAI,CAAGb,KAAK,CAACM,MAAN,CAAaQ,KAAb,CAAmB,CAAnB,CAAb,CACA,KAAKN,QAAL,kBACK,KAAKhB,KADV,EAEEC,KAAK,CAAEoB,IAFT,IAID,C,uCAEQ,IACCnB,CAAAA,IADD,CACU,KAAKF,KADf,CACCE,IADD,CAEP,MACE,6BAAM,SAAS,CAAC,WAAhB,EACE,4BAAM,QAAQ,CAAE,KAAKI,oBAArB,CAA2C,SAAS,CAAC,kBAArD,EACE,6BAAO,OAAO,CAAC,MAAf,CAAsB,EAAE,CAAC,KAAzB,CAA+B,SAAS,CAAC,SAAzC,YADF,CAIE,gCACE,WAAW,CAAC,yBADd,CAEE,KAAK,CAAEJ,IAAI,EAAI,EAFjB,CAGE,IAAI,CAAC,MAHP,CAIE,SAAS,CAAC,mBAJZ,CAKE,QAAQ,CAAE,KAAKE,iBALjB,EAJF,CAWE,6BAAO,OAAO,CAAC,OAAf,CAAuB,EAAE,CAAC,OAA1B,CAAkC,SAAS,CAAC,SAA5C,UAXF,CAcE,6BACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,OAFP,CAGE,SAAS,CAAC,mBAHZ,CAIE,QAAQ,CAAE,KAAKG,gBAJjB,EAdF,CAoBE,8BAAQ,SAAS,CAAC,iCAAlB,YApBF,CADF,CADF,CA0BD,C,6BA/E2BZ,S,EAkF9B,cAAeG,CAAAA,eAAf","sourcesContent":["import React, { Component } from 'react';\nimport { create as createCommentService } from './../../services/comments';\n\nclass CommentEditView extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      image: null,\n      text: '',\n      restaurant: ''\n    };\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleFormSubmission = this.handleFormSubmission.bind(this);\n    this.handleFileChange = this.handleFileChange.bind(this);\n  }\n\n  handleInputChange(event) {\n    const resId = this.props.match.params.id;\n    const name = event.target.name;\n    const value = event.target.value;\n    this.setState({\n      ...this.state,\n      [name]: value,\n      restaurant: resId\n    });\n  }\n\n  async handleFormSubmission(event) {\n    event.preventDefault();\n    const { text, image } = this.state;\n    const resId = this.props.match.params.id;\n\n    try {\n      /* const commentDocument = */ await createCommentService({\n        text,\n        image,\n        restaurant: resId\n      });\n\n      this.props.onSubmit();\n      // this.props.history.push(`/restaurant/${resId}`);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  handleFileChange(event) {\n    const file = event.target.files[0];\n    this.setState({\n      ...this.state,\n      image: file\n    });\n  }\n\n  render() {\n    const { text } = this.state;\n    return (\n      <main className=\"pl-4 ml-4\">\n        <form onSubmit={this.handleFormSubmission} className=\"form-signin w-75\">\n          <label htmlFor=\"text\" id=\"txt\" className=\"sr-only\">\n            Comment\n          </label>\n          <textarea\n            placeholder=\"Write your comment here\"\n            value={text || ''}\n            name=\"text\"\n            className=\"form-control mb-3\"\n            onChange={this.handleInputChange}\n          ></textarea>\n          <label htmlFor=\"image\" id=\"image\" className=\"sr-only\">\n            Image\n          </label>\n          <input\n            type=\"file\"\n            name=\"image\"\n            className=\"form-control mb-3\"\n            onChange={this.handleFileChange}\n          />\n          <button className=\"btn btn-lg MyBtn btn-block mb-5\">Comment</button>\n        </form>\n      </main>\n    );\n  }\n}\n\nexport default CommentEditView;\n"]},"metadata":{},"sourceType":"module"}