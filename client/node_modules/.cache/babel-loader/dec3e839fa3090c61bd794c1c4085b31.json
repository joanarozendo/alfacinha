{"ast":null,"code":"import _regeneratorRuntime from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/regenerator\";import _classCallCheck from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{loadRestaurant as restaurantApi}from\"../../services/restaurantZomato\";import CommentList from\"./../Comments/CommentList\";import Button from\"react-bootstrap/Button\";import MapBox from\"./../../components/MapBox\";// import { loadUserInformation as loadUserInformationService } from \"./../../services/authentication\";\nimport{addToFavorites as addToFavoritesService}from\"./../../services/authentication\";import\"./style.css\";var singleRestaurant=/*#__PURE__*/function(_Component){_inherits(singleRestaurant,_Component);function singleRestaurant(props){var _this;_classCallCheck(this,singleRestaurant);_this=_possibleConstructorReturn(this,_getPrototypeOf(singleRestaurant).call(this,props));_this.state={restaurant:null,user:_this.props.user,// user: null,\nfavorites:null};_this.addToFavoritesButton=_this.addToFavoritesButton.bind(_assertThisInitialized(_this));return _this;}_createClass(singleRestaurant,[{key:\"componentDidMount\",value:function componentDidMount(){var id,_singleRestaurant;return _regeneratorRuntime.async(function componentDidMount$(_context){while(1){switch(_context.prev=_context.next){case 0:id=this.props.match.params.id;// console.log(\"singleRest\", id);\n_context.prev=1;_context.next=4;return _regeneratorRuntime.awrap(restaurantApi(id));case 4:_singleRestaurant=_context.sent;//console.log('response from api', singleRestaurant);\nthis.setState({restaurant:_singleRestaurant,user:this.props.user});_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.log(_context.t0);this.props.history.push(\"/error/404\");case 12:case\"end\":return _context.stop();}}},null,this,[[1,8]]);}},{key:\"addToFavoritesButton\",value:function addToFavoritesButton(event,name){var favoriteRestaurantId;return _regeneratorRuntime.async(function addToFavoritesButton$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();favoriteRestaurantId=this.props.match.params.id;console.log(\"addToFavoritesButton STATE\",favoriteRestaurantId,name);_context2.prev=3;_context2.next=6;return _regeneratorRuntime.awrap(addToFavoritesService(favoriteRestaurantId,name));case 6:_context2.next=8;return _regeneratorRuntime.awrap(this.props.loadUser());case 8:_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](3);console.log(_context2.t0);case 13:case\"end\":return _context2.stop();}}},null,this,[[3,10]]);}},{key:\"render\",value:function render(){var _this2=this;var restaurant=this.state.restaurant;var user=this.state.user;// const id = this.props.match.params.id;\n//console.log('hello', restaurant);\nreturn React.createElement(\"div\",{className:\"MinPageHeight mt-4 pt-4\"},restaurant&&React.createElement(\"div\",{className:\"SingleRestaurantCard card m-5 p-5\"},React.createElement(\"div\",{className:\"row no-gutters\"},React.createElement(\"div\",{className:\"col-md-4\"},React.createElement(\"img\",{src:restaurant.featured_image,className:\"card-img\",alt:\"...\"}),React.createElement(MapBox,{lat:restaurant.location.latitude,lng:restaurant.location.longitude})),React.createElement(\"div\",{className:\"col-md-8\"},React.createElement(\"div\",{className:\"card-body\"},React.createElement(\"h5\",{className:\"card-title\"},restaurant.name),React.createElement(\"p\",{className:\"card-text\"},\"Cuisines: \",restaurant.cuisines),React.createElement(\"p\",{className:\"card-text\"},\"Type: \",restaurant.establishment),React.createElement(\"p\",{className:\"card-text\"},\"Average cost: \",restaurant.average_cost_for_two/2,restaurant.currency),React.createElement(\"p\",{className:\"card-text\"},\"Neighborhood: \",restaurant.location.locality_verbose),React.createElement(\"p\",{className:\"card-text\"},\"Address: \",restaurant.location.address),React.createElement(\"p\",{className:\"card-text\"},\"Contact: \",restaurant.phone_numbers),React.createElement(\"p\",{className:\"card-text\"},\"Zomato Rating\",\":\",\" \",restaurant.user_rating.aggregate_rating,\" (\",restaurant.user_rating.rating_text,\")\"),user&&React.createElement(\"div\",null,!this.props.user.favorites.id&&React.createElement(Button,{onClick:function onClick(event){_this2.addToFavoritesButton(event,restaurant.name);},className:\"btn MyBtn\"},\"Remove from Favorites\")||React.createElement(Button,{onClick:function onClick(event){_this2.addToFavoritesButton(event,restaurant.name);},className:\"btn MyBtn\"},\"Add to Favorites\")))))),React.createElement(\"div\",null,React.createElement(\"br\",null),React.createElement(CommentList,this.props),React.createElement(\"br\",null)));}}]);return singleRestaurant;}(Component);export default singleRestaurant;","map":{"version":3,"sources":["/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/src/views/Restaurants/SingleRestaurantView.jsx"],"names":["React","Component","loadRestaurant","restaurantApi","CommentList","Button","MapBox","addToFavorites","addToFavoritesService","singleRestaurant","props","state","restaurant","user","favorites","addToFavoritesButton","bind","id","match","params","setState","console","log","history","push","event","name","preventDefault","favoriteRestaurantId","loadUser","featured_image","location","latitude","longitude","cuisines","establishment","average_cost_for_two","currency","locality_verbose","address","phone_numbers","user_rating","aggregate_rating","rating_text"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { loadRestaurant as restaurantApi } from \"../../services/restaurantZomato\";\nimport CommentList from \"./../Comments/CommentList\";\nimport Button from \"react-bootstrap/Button\";\nimport MapBox from \"./../../components/MapBox\";\n\n// import { loadUserInformation as loadUserInformationService } from \"./../../services/authentication\";\nimport { addToFavorites as addToFavoritesService } from \"./../../services/authentication\";\n\nimport \"./style.css\";\n\nclass singleRestaurant extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      restaurant: null,\n      user: this.props.user,\n      // user: null,\n      favorites: null\n    };\n    this.addToFavoritesButton = this.addToFavoritesButton.bind(this);\n  }\n\n  async componentDidMount() {\n    const id = this.props.match.params.id;\n    // console.log(\"singleRest\", id);\n    try {\n      // const user = await loadUserInformationService();\n      const singleRestaurant = await restaurantApi(id);\n      //console.log('response from api', singleRestaurant);\n      this.setState({\n        restaurant: singleRestaurant,\n        user: this.props.user\n      });\n    } catch (error) {\n      console.log(error);\n      this.props.history.push(\"/error/404\");\n    }\n  }\n\n  async addToFavoritesButton(event, name) {\n    event.preventDefault();\n    const favoriteRestaurantId = this.props.match.params.id;\n    console.log(\"addToFavoritesButton STATE\", favoriteRestaurantId, name);\n    try {\n      await addToFavoritesService(favoriteRestaurantId, name);\n      await this.props.loadUser();\n      // console.log(\"USER JOINVIEW\", user);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  render() {\n    const restaurant = this.state.restaurant;\n    const user = this.state.user;\n    // const id = this.props.match.params.id;\n    //console.log('hello', restaurant);\n    return (\n      <div className=\"MinPageHeight mt-4 pt-4\">\n        {restaurant && (\n          <div className=\"SingleRestaurantCard card m-5 p-5\">\n            <div className=\"row no-gutters\">\n              <div className=\"col-md-4\">\n                <img\n                  src={restaurant.featured_image}\n                  className=\"card-img\"\n                  alt=\"...\"\n                />\n                <MapBox\n                  lat={restaurant.location.latitude}\n                  lng={restaurant.location.longitude}\n                />\n              </div>\n              <div className=\"col-md-8\">\n                <div className=\"card-body\">\n                  <h5 className=\"card-title\">{restaurant.name}</h5>\n                  <p className=\"card-text\">Cuisines: {restaurant.cuisines}</p>\n                  <p className=\"card-text\">Type: {restaurant.establishment}</p>\n                  <p className=\"card-text\">\n                    Average cost: {restaurant.average_cost_for_two / 2}\n                    {restaurant.currency}\n                  </p>\n                  <p className=\"card-text\">\n                    Neighborhood: {restaurant.location.locality_verbose}\n                  </p>\n                  <p className=\"card-text\">\n                    Address: {restaurant.location.address}\n                  </p>\n                  <p className=\"card-text\">\n                    Contact: {restaurant.phone_numbers}\n                  </p>\n                  <p className=\"card-text\">\n                    Zomato Rating{/*  (1-5) */}:{\" \"}\n                    {restaurant.user_rating.aggregate_rating} (\n                    {restaurant.user_rating.rating_text})\n                  </p>\n                  {/* <p className=\"card-text\">\n                    Number of votes: {restaurant.user_rating.votes}\n                  </p> */}\n                  {/* <p className=\"card-text\">On Zomato: {restaurant.url}</p> */}\n                  {user && (\n                    <div>\n                      {(!this.props.user.favorites.id && (\n                        <Button\n                          onClick={event => {\n                            this.addToFavoritesButton(event, restaurant.name);\n                          }}\n                          className=\"btn MyBtn\"\n                        >\n                          Remove from Favorites\n                        </Button>\n                      )) || (\n                        <Button\n                          onClick={event => {\n                            this.addToFavoritesButton(event, restaurant.name);\n                          }}\n                          className=\"btn MyBtn\"\n                        >\n                          Add to Favorites\n                        </Button>\n                      )}\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n        <div>\n          <br />\n          <CommentList {...this.props} />\n          {/* <CommentCreateView {...this.props} /> */}\n          {/* <div\n            className=\"fb-comments\"\n            data-href=\"https://www.facebook.com/Alfacinha-100341914808752\"\n            data-width=\"\"\n            data-numposts=\"10\"\n          ></div> */}\n          <br />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default singleRestaurant;\n"]},"metadata":{},"sourceType":"module"}