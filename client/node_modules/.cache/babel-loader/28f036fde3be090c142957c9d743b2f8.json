{"ast":null,"code":"import _objectSpread from \"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/src/views/User/UserEditProfileView.jsx\";\nimport React, { Component } from \"react\";\nimport { edit as editUserService } from \"./../../services/user\";\nimport { load as loadUserService } from \"./../../services/user\";\nimport { remove as removeUserService } from \"./../../services/user\"; // import { loadUserInformation as loadUserInformationService } from \"./../../services/authentication\";\n\nclass UserEditProfileView extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: null\n    };\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleFileChange = this.handleFileChange.bind(this);\n    this.handleFormSubmission = this.handleFormSubmission.bind(this);\n    this.onDeleteTrigger = this.onDeleteTrigger.bind(this);\n  }\n\n  async componentDidMount() {\n    console.log(this.props);\n\n    try {\n      const user = await loadUserService();\n      this.setState({\n        user\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  handleInputChange(event) {\n    const name = event.target.name;\n    const value = event.target.value; // console.log(name, value);\n\n    this.setState({\n      // [name]: value\n      user: _objectSpread({}, this.state.user, {\n        [name]: value\n      })\n    });\n  }\n\n  handleFileChange(event) {\n    console.dir(event.target.files);\n    const file = event.target.files[0];\n    this.setState({\n      image: file\n    });\n  }\n\n  async handleFormSubmission(event) {\n    event.preventDefault();\n    const user = this.state.user;\n    const id = this.props.match.params.id;\n\n    try {\n      await editUserService(id, user);\n      this.props.history.push(`/${id}`);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async onDeleteTrigger() {\n    const id = this.props.match.params.id;\n\n    try {\n      await removeUserService(id);\n      this.props.history.push(`/`);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  render() {\n    const user = this.state.user;\n    return React.createElement(\"main\", {\n      className: \"MinPageHeight m-5 p-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, user && React.createElement(\"form\", {\n      onSubmit: this.handleFormSubmission,\n      className: \"form-signin w-50\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"name\",\n      className: \"sr-only\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"Name\"), React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Name\",\n      value: user.name || \"\",\n      className: \"form-control mb-3\",\n      name: \"name\",\n      onChange: this.handleInputChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"email\",\n      className: \"sr-only\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"Email\"), React.createElement(\"input\", {\n      type: \"email\",\n      placeholder: \"Email\",\n      value: user.email || \"\",\n      className: \"form-control mb-3\",\n      name: \"email\",\n      onChange: this.handleInputChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"aboutMe\",\n      className: \"sr-only\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"About Me\"), React.createElement(\"textarea\", {\n      type: \"text\",\n      placeholder: \"About Me\",\n      value: user.aboutMe || \"\",\n      className: \"form-control mb-3\",\n      name: \"aboutMe\",\n      onChange: this.handleInputChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"image\",\n      className: \"sr-only\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Image\"), React.createElement(\"input\", {\n      type: \"file\",\n      placeholder: \"image\",\n      value: user.image || \"\",\n      className: \"form-control mb-3\",\n      name: \"image\",\n      onChange: this.handleFileChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"btn MyBtn w-25 mb-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"Edit user\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"btn MyBtn w-25 mb-2\",\n      onClick: this.onDeleteTrigger,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"Delete user\")));\n  }\n\n}\n\nexport default UserEditProfileView;","map":{"version":3,"sources":["/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/src/views/User/UserEditProfileView.jsx"],"names":["React","Component","edit","editUserService","load","loadUserService","remove","removeUserService","UserEditProfileView","constructor","props","state","user","handleInputChange","bind","handleFileChange","handleFormSubmission","onDeleteTrigger","componentDidMount","console","log","setState","error","event","name","target","value","dir","files","file","image","preventDefault","id","match","params","history","push","render","email","aboutMe"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n\nimport { edit as editUserService } from \"./../../services/user\";\nimport { load as loadUserService } from \"./../../services/user\";\nimport { remove as removeUserService } from \"./../../services/user\";\n// import { loadUserInformation as loadUserInformationService } from \"./../../services/authentication\";\n\nclass UserEditProfileView extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: null\n    };\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleFileChange = this.handleFileChange.bind(this);\n    this.handleFormSubmission = this.handleFormSubmission.bind(this);\n    this.onDeleteTrigger = this.onDeleteTrigger.bind(this);\n  }\n\n  async componentDidMount() {\n    console.log(this.props);    \n    try {\n      const user = await loadUserService();\n      this.setState({\n        user\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  handleInputChange(event) {\n    const name = event.target.name;\n    const value = event.target.value;\n    // console.log(name, value);\n    this.setState({\n      // [name]: value\n      user: {\n        ...this.state.user,\n        [name]: value\n      }\n    });\n  }\n\n    handleFileChange(event) {\n    console.dir(event.target.files);\n    const file = event.target.files[0];\n    this.setState({\n      image: file\n    });\n  }\n\n  async handleFormSubmission(event) {\n    event.preventDefault();\n    const user = this.state.user;\n    const id = this.props.match.params.id;\n    try {\n      await editUserService(id, user);\n      this.props.history.push(`/${id}`);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async onDeleteTrigger() {\n    const id = this.props.match.params.id;\n    try {\n      await removeUserService(id);\n      this.props.history.push(`/`);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  render() {\n    const user = this.state.user;\n    return (\n      <main className=\"MinPageHeight m-5 p-5\">\n        {user && (\n          <form\n            onSubmit={this.handleFormSubmission}\n            className=\"form-signin w-50\"\n          >\n            <label htmlFor=\"name\" className=\"sr-only\">\n              Name\n            </label>\n            <input\n              type=\"text\"\n              placeholder=\"Name\"\n              value={user.name || \"\"}\n              className=\"form-control mb-3\"\n              name=\"name\"\n              onChange={this.handleInputChange}\n              required\n            />\n\n            <label htmlFor=\"email\" className=\"sr-only\">\n              Email\n            </label>\n            <input\n              type=\"email\"\n              placeholder=\"Email\"\n              value={user.email || \"\"}\n              className=\"form-control mb-3\"\n              name=\"email\"\n              onChange={this.handleInputChange}\n              required\n            />\n\n            <label htmlFor=\"aboutMe\" className=\"sr-only\">\n              About Me\n            </label>\n            <textarea\n              type=\"text\"\n              placeholder=\"About Me\"\n              value={user.aboutMe || \"\"}\n              className=\"form-control mb-3\"\n              name=\"aboutMe\"\n              onChange={this.handleInputChange}\n              required\n            ></textarea>\n\n            <label htmlFor=\"image\" className=\"sr-only\">\n              Image\n            </label>\n            <input\n              type=\"file\"\n              placeholder=\"image\"\n              value={user.image || \"\"}\n              className=\"form-control mb-3\"\n              name=\"image\"\n              onChange={this.handleFileChange}\n              required\n            />\n\n            <button className=\"btn MyBtn w-25 mb-2\">Edit user</button>\n            <br/>\n            <button className=\"btn MyBtn w-25 mb-2\" onClick={this.onDeleteTrigger}>\n          Delete user\n        </button>\n          </form>\n        )}\n        \n      </main>\n    );\n  }\n}\n\nexport default UserEditProfileView;\n"]},"metadata":{},"sourceType":"module"}