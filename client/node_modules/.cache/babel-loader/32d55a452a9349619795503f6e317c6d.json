{"ast":null,"code":"import _objectSpread from \"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/src/views/Restaurants/RestaurantListView.jsx\";\nimport React, { Component } from \"react\";\nimport { listRestaurants } from \"../../services/restaurantZomato\";\nimport SearchInput from \"../../components/SearchInput\";\nimport { Link } from \"react-router-dom\";\nimport ReactLoading from \"react-loading\";\nimport \"./style.css\";\nimport Button from \"react-bootstrap/Button\";\n\nclass RestaurantListView extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loadingState: false,\n      restaurants: null,\n      limit: 15,\n      nameQuery: \"\",\n      locationQuery: \"\",\n      averageQuery: \"\"\n    };\n    this.onLoadMore = this.onLoadMore.bind(this);\n    this.handleOnInputChange = this.handleOnInputChange.bind(this);\n    this.renderRestaurants = this.renderRestaurants.bind(this);\n    this.filterBySearch = this.filterBySearch.bind(this);\n  }\n\n  async componentDidMount() {\n    const vegetarianRestaurants = await listRestaurants();\n    this.setState({\n      restaurants: vegetarianRestaurants\n    });\n  }\n\n  handleOnInputChange(event) {\n    const name = event.target.name;\n    const value = event.target.value;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  filterBySearch(restaurant) {\n    console.log(restaurant);\n\n    if (restaurant.restaurant.name && this.state.nameQuery) {\n      return restaurant.restaurant.name.toLowerCase().includes(this.state.nameQuery);\n    }\n\n    if (restaurant.restaurant.location.address && this.state.locationQuery) {\n      return restaurant.restaurant.location.address.toLowerCase().includes(this.state.locationQuery);\n    }\n\n    if (restaurant.restaurant.average_cost_for_two) return (restaurant.restaurant.average_cost_for_two / 2).toString().toLowerCase().includes(this.state.averageQuery);\n  }\n\n  onLoadMore() {\n    // console.log(\"load more\");\n    this.setState(_objectSpread({}, this.state, {\n      limit: this.state.limit + 10\n    }));\n  }\n\n  renderRestaurants() {\n    return this.state.restaurants.filter(filteredRestaurantBySearch => this.filterBySearch(filteredRestaurantBySearch)).slice(0, this.state.limit).map(restaurant => {\n      return React.createElement(\"div\", {\n        key: restaurant.restaurant.id,\n        className: \"card ml-3 mb-5 mr-5\",\n        style: {\n          maxWidth: \"540px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row no-gutters\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: restaurant.restaurant.featured_image,\n        className: \"card-img\",\n        alt: \"Restaurant\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-md-8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: `/restaurant/${restaurant.restaurant.id}`,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        className: \"card-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, restaurant.restaurant.name)), React.createElement(\"p\", {\n        className: \"card-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"Cousine: \", restaurant.restaurant.cuisines), React.createElement(\"p\", {\n        className: \"card-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"Location: \", restaurant.restaurant.location.address), React.createElement(\"p\", {\n        className: \"card-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"Average Cost:\", \" \", restaurant.restaurant.average_cost_for_two / 2, restaurant.restaurant.currency), React.createElement(\"p\", {\n        className: \"card-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"small\", {\n        className: \"text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \"Contact: \", restaurant.restaurant.phone_numbers))))));\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"MinPageHeight\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(SearchInput, Object.assign({}, this.state, {\n      onChange: this.handleOnInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    })), !this.state.restaurants && React.createElement(ReactLoading, {\n      className: \"loading\",\n      type: \"bars\",\n      color: \"white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }), this.state.restaurants && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"d-flex flex-wrap ml-5 mt-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, this.renderRestaurants()), React.createElement(Button, {\n      className: \"MyBtn LogoutBtn mx-2\",\n      onClick: this.onLoadMore,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"Load\")));\n  }\n\n}\n\nexport default RestaurantListView;","map":{"version":3,"sources":["/Users/joaoevangelho/ironhack/projects/alfacinha/starter-code/client/src/views/Restaurants/RestaurantListView.jsx"],"names":["React","Component","listRestaurants","SearchInput","Link","ReactLoading","Button","RestaurantListView","constructor","props","state","loadingState","restaurants","limit","nameQuery","locationQuery","averageQuery","onLoadMore","bind","handleOnInputChange","renderRestaurants","filterBySearch","componentDidMount","vegetarianRestaurants","setState","event","name","target","value","restaurant","console","log","toLowerCase","includes","location","address","average_cost_for_two","toString","filter","filteredRestaurantBySearch","slice","map","id","maxWidth","featured_image","cuisines","currency","phone_numbers","render"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,eAAT,QAAgC,iCAAhC;AACA,OAAOC,WAAP,MAAwB,8BAAxB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,YAAP,MAAyB,eAAzB;AAEA,OAAO,aAAP;AACA,OAAOC,MAAP,MAAmB,wBAAnB;;AAEA,MAAMC,kBAAN,SAAiCN,SAAjC,CAA2C;AACzCO,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,YAAY,EAAE,KADH;AAEXC,MAAAA,WAAW,EAAE,IAFF;AAGXC,MAAAA,KAAK,EAAE,EAHI;AAIXC,MAAAA,SAAS,EAAE,EAJA;AAKXC,MAAAA,aAAa,EAAE,EALJ;AAMXC,MAAAA,YAAY,EAAE;AANH,KAAb;AAQA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKC,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBD,IAAzB,CAA8B,IAA9B,CAA3B;AACA,SAAKE,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBF,IAAvB,CAA4B,IAA5B,CAAzB;AACA,SAAKG,cAAL,GAAsB,KAAKA,cAAL,CAAoBH,IAApB,CAAyB,IAAzB,CAAtB;AACD;;AAED,QAAMI,iBAAN,GAA0B;AACxB,UAAMC,qBAAqB,GAAG,MAAMrB,eAAe,EAAnD;AACA,SAAKsB,QAAL,CAAc;AACZZ,MAAAA,WAAW,EAAEW;AADD,KAAd;AAGD;;AAEDJ,EAAAA,mBAAmB,CAACM,KAAD,EAAQ;AACzB,UAAMC,IAAI,GAAGD,KAAK,CAACE,MAAN,CAAaD,IAA1B;AACA,UAAME,KAAK,GAAGH,KAAK,CAACE,MAAN,CAAaC,KAA3B;AACA,SAAKJ,QAAL,CAAc;AACZ,OAACE,IAAD,GAAQE;AADI,KAAd;AAGD;;AACDP,EAAAA,cAAc,CAACQ,UAAD,EAAa;AACzBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,UAAZ;;AACA,QAAIA,UAAU,CAACA,UAAX,CAAsBH,IAAtB,IAA8B,KAAKhB,KAAL,CAAWI,SAA7C,EAAwD;AACtD,aAAOe,UAAU,CAACA,UAAX,CAAsBH,IAAtB,CACJM,WADI,GAEJC,QAFI,CAEK,KAAKvB,KAAL,CAAWI,SAFhB,CAAP;AAGD;;AACD,QAAIe,UAAU,CAACA,UAAX,CAAsBK,QAAtB,CAA+BC,OAA/B,IAA0C,KAAKzB,KAAL,CAAWK,aAAzD,EAAwE;AACtE,aAAOc,UAAU,CAACA,UAAX,CAAsBK,QAAtB,CAA+BC,OAA/B,CACJH,WADI,GAEJC,QAFI,CAEK,KAAKvB,KAAL,CAAWK,aAFhB,CAAP;AAGD;;AACD,QAAIc,UAAU,CAACA,UAAX,CAAsBO,oBAA1B,EACE,OAAO,CAACP,UAAU,CAACA,UAAX,CAAsBO,oBAAtB,GAA6C,CAA9C,EACJC,QADI,GAEJL,WAFI,GAGJC,QAHI,CAGK,KAAKvB,KAAL,CAAWM,YAHhB,CAAP;AAIH;;AACDC,EAAAA,UAAU,GAAG;AACX;AACA,SAAKO,QAAL,mBACK,KAAKd,KADV;AAEEG,MAAAA,KAAK,EAAE,KAAKH,KAAL,CAAWG,KAAX,GAAmB;AAF5B;AAID;;AAEDO,EAAAA,iBAAiB,GAAG;AAClB,WAAO,KAAKV,KAAL,CAAWE,WAAX,CACJ0B,MADI,CACGC,0BAA0B,IAChC,KAAKlB,cAAL,CAAoBkB,0BAApB,CAFG,EAIJC,KAJI,CAIE,CAJF,EAIK,KAAK9B,KAAL,CAAWG,KAJhB,EAKJ4B,GALI,CAKAZ,UAAU,IAAI;AACjB,aACE;AACE,QAAA,GAAG,EAAEA,UAAU,CAACA,UAAX,CAAsBa,EAD7B;AAEE,QAAA,SAAS,EAAC,qBAFZ;AAGE,QAAA,KAAK,EAAE;AAAEC,UAAAA,QAAQ,EAAE;AAAZ,SAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,GAAG,EAAEd,UAAU,CAACA,UAAX,CAAsBe,cAD7B;AAEE,QAAA,SAAS,EAAC,UAFZ;AAGE,QAAA,GAAG,EAAC,YAHN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,EAQE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAG,eAAcf,UAAU,CAACA,UAAX,CAAsBa,EAAG,EAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAI,QAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA4Bb,UAAU,CAACA,UAAX,CAAsBH,IAAlD,CADF,CADF,EAIE;AAAG,QAAA,SAAS,EAAC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACYG,UAAU,CAACA,UAAX,CAAsBgB,QADlC,CAJF,EAOE;AAAG,QAAA,SAAS,EAAC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACahB,UAAU,CAACA,UAAX,CAAsBK,QAAtB,CAA+BC,OAD5C,CAPF,EAUE;AAAG,QAAA,SAAS,EAAC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BACgB,GADhB,EAEGN,UAAU,CAACA,UAAX,CAAsBO,oBAAtB,GAA6C,CAFhD,EAGGP,UAAU,CAACA,UAAX,CAAsBiB,QAHzB,CAVF,EAeE;AAAG,QAAA,SAAS,EAAC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAO,QAAA,SAAS,EAAC,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACYjB,UAAU,CAACA,UAAX,CAAsBkB,aADlC,CADF,CAfF,CADF,CARF,CALF,CADF;AAwCD,KA9CI,CAAP;AA+CD;;AAEDC,EAAAA,MAAM,GAAG;AACP,WACE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEE,oBAAC,WAAD,oBAAiB,KAAKtC,KAAtB;AAA6B,MAAA,QAAQ,EAAE,KAAKS,mBAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAFF,EAGG,CAAC,KAAKT,KAAL,CAAWE,WAAZ,IACC,oBAAC,YAAD;AAAc,MAAA,SAAS,EAAC,SAAxB;AAAkC,MAAA,IAAI,EAAE,MAAxC;AAAgD,MAAA,KAAK,EAAE,OAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJJ,EAMG,KAAKF,KAAL,CAAWE,WAAX,IACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKQ,iBAAL,EADH,CADF,EAIE,oBAAC,MAAD;AAAQ,MAAA,SAAS,EAAC,sBAAlB;AAAyC,MAAA,OAAO,EAAE,KAAKH,UAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF,CAPJ,CADF;AAmBD;;AA/HwC;;AAkI3C,eAAeV,kBAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { listRestaurants } from \"../../services/restaurantZomato\";\nimport SearchInput from \"../../components/SearchInput\";\nimport { Link } from \"react-router-dom\";\nimport ReactLoading from \"react-loading\";\n\nimport \"./style.css\";\nimport Button from \"react-bootstrap/Button\";\n\nclass RestaurantListView extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loadingState: false,\n      restaurants: null,\n      limit: 15,\n      nameQuery: \"\",\n      locationQuery: \"\",\n      averageQuery: \"\"\n    };\n    this.onLoadMore = this.onLoadMore.bind(this);\n    this.handleOnInputChange = this.handleOnInputChange.bind(this);\n    this.renderRestaurants = this.renderRestaurants.bind(this);\n    this.filterBySearch = this.filterBySearch.bind(this);\n  }\n\n  async componentDidMount() {\n    const vegetarianRestaurants = await listRestaurants();\n    this.setState({\n      restaurants: vegetarianRestaurants\n    });\n  }\n\n  handleOnInputChange(event) {\n    const name = event.target.name;\n    const value = event.target.value;\n    this.setState({\n      [name]: value\n    });\n  }\n  filterBySearch(restaurant) {\n    console.log(restaurant);\n    if (restaurant.restaurant.name && this.state.nameQuery) {\n      return restaurant.restaurant.name\n        .toLowerCase()\n        .includes(this.state.nameQuery);\n    }\n    if (restaurant.restaurant.location.address && this.state.locationQuery) {\n      return restaurant.restaurant.location.address\n        .toLowerCase()\n        .includes(this.state.locationQuery);\n    }\n    if (restaurant.restaurant.average_cost_for_two)\n      return (restaurant.restaurant.average_cost_for_two / 2)\n        .toString()\n        .toLowerCase()\n        .includes(this.state.averageQuery);\n  }\n  onLoadMore() {\n    // console.log(\"load more\");\n    this.setState({\n      ...this.state,\n      limit: this.state.limit + 10\n    });\n  }\n\n  renderRestaurants() {\n    return this.state.restaurants\n      .filter(filteredRestaurantBySearch =>\n        this.filterBySearch(filteredRestaurantBySearch)\n      )\n      .slice(0, this.state.limit)\n      .map(restaurant => {\n        return (\n          <div\n            key={restaurant.restaurant.id}\n            className=\"card ml-3 mb-5 mr-5\"\n            style={{ maxWidth: \"540px\" }}\n          >\n            <div className=\"row no-gutters\">\n              <div className=\"col-md-4\">\n                <img\n                  src={restaurant.restaurant.featured_image}\n                  className=\"card-img\"\n                  alt=\"Restaurant\"\n                />\n              </div>\n              <div className=\"col-md-8\">\n                <div className=\"card-body\">\n                  <Link to={`/restaurant/${restaurant.restaurant.id}`}>\n                    <h5 className=\"card-title\">{restaurant.restaurant.name}</h5>\n                  </Link>\n                  <p className=\"card-text\">\n                    Cousine: {restaurant.restaurant.cuisines}\n                  </p>\n                  <p className=\"card-text\">\n                    Location: {restaurant.restaurant.location.address}\n                  </p>\n                  <p className=\"card-text\">\n                    Average Cost:{\" \"}\n                    {restaurant.restaurant.average_cost_for_two / 2}\n                    {restaurant.restaurant.currency}\n                  </p>\n                  <p className=\"card-text\">\n                    <small className=\"text-muted\">\n                      Contact: {restaurant.restaurant.phone_numbers}\n                    </small>\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n      });\n  }\n\n  render() {\n    return (\n      <div className=\"MinPageHeight\">\n        {/* <SearchInput {...this.state} onChange={this.handleOnInputChange} /> */}\n        <SearchInput {...this.state} onChange={this.handleOnInputChange} />\n        {!this.state.restaurants && (\n          <ReactLoading className=\"loading\" type={\"bars\"} color={\"white\"} />\n        )}\n        {this.state.restaurants && (\n          <div>\n            <div className=\"d-flex flex-wrap ml-5 mt-5\">\n              {this.renderRestaurants()}\n            </div>\n            <Button className=\"MyBtn LogoutBtn mx-2\" onClick={this.onLoadMore}>\n              Load\n            </Button>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default RestaurantListView;\n"]},"metadata":{},"sourceType":"module"}